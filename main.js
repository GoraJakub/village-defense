(()=>{var e={7962:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i=n.p+"465001d97c03e20d061feb68734afabf.mp3"},6296:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i=n.p+"d5796d4efa5554bd64fe413b92486a4f.mp3"},4570:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i=n.p+"9fa2ca3262e119984fb4e1e24ee78b33.png"},7415:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i=n.p+"caa339138578393965b2eced07462b86.png"},6088:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i=n.p+"acfa01b4b4d61175633af1bdca6c4d1d.png"},5684:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i=n.p+"54801285a942c98b02189ff47bf04636.jpg"},7515:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i=n.p+"6fbb87bbaba4c08052e01ba5f6b2f770.jpg"},3425:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i=n.p+"9349e78fedbc4c176a589ec6857b5737.jpg"},4092:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i=n.p+"e0eb41d1b50cc5a22594b1521536c7bc.png"},7381:(e,t,n)=>{"use strict";n.r(t)},6342:(e,t,n)=>{"use strict";n.r(t)},3208:(e,t,n)=>{"use strict";n.r(t)},3368:(e,t,n)=>{"use strict";n.r(t)},7600:(e,t,n)=>{"use strict";n.r(t)},6378:(e,t,n)=>{"use strict";n.r(t)},4950:(e,t,n)=>{"use strict";n.r(t)},7441:(e,t,n)=>{"use strict";n.r(t)},8574:(e,t,n)=>{"use strict";n.r(t)},4461:(e,t,n)=>{"use strict";n.r(t)},3156:(e,t,n)=>{"use strict";n.r(t)},8786:(e,t,n)=>{"use strict";n.r(t)},3321:(e,t,n)=>{"use strict";n.r(t)},9274:(e,t,n)=>{"use strict";n.r(t)},3164:(e,t,n)=>{"use strict";n.r(t)},2861:(e,t,n)=>{"use strict";n.r(t)},1568:(e,t,n)=>{"use strict";n.r(t)},5460:(e,t,n)=>{"use strict";n.r(t)},7931:(e,t,n)=>{"use strict";n.r(t)},9962:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;var i=n(5475),o=n(506),s=n(2087),a=n(4005),r=n(4457),u=n(2014),l=["ArrowUp","ArrowUp","ArrowDown","ArrowDown","ArrowLeft","ArrowRight","ArrowLeft","ArrowRight","b","a"],c=0,d=function(){function e(){}return e.prototype.start=function(){this.appMainContainer=document.querySelector("#app"),this.audio=new i.Audio,this.gameSettings=new a.GameSettings,this.game=new o.Game(this.gameSettings),this.homePage=new s.HomePage(this),this.showHomePage(!1),this.bindKeyEvents()},e.prototype.showHomePage=function(e){var t;null===(t=this.gamePage)||void 0===t||t.close(this.appMainContainer),this.homePage.show(this.appMainContainer,e),this.toggleBodyScroll(!1)},e.prototype.showSplashPage=function(){this.splashPage||(this.splashPage=new s.SplashPage(this)),this.homePage.close(this.appMainContainer),this.splashPage.show(this.appMainContainer)},e.prototype.showGamePage=function(){var e,t;this.gamePage||(this.gamePage=new s.GamePage(this)),null===(e=this.splashPage)||void 0===e||e.close(this.appMainContainer),null===(t=this.gamePage)||void 0===t||t.show(this.appMainContainer),this.toggleBodyScroll(!0)},e.prototype.resetGame=function(){this.gameSettings.fraction=r.Fractions.Elves},e.prototype.toggleBodyScroll=function(e){document.body.style.overflowY=e?"auto":"hidden"},e.prototype.bindKeyEvents=function(){document.addEventListener("keydown",this.keyHandler.bind(this),!1)},e.prototype.keyHandler=function(e){l.indexOf(e.key)<0||e.key!==l[c]?c=0:(c++,l.length===c&&(c=0,this.showTestModal()))},e.prototype.showTestModal=function(){new u.TestModal(this.gameSettings).show()},e}();t.App=d},5475:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Audio=void 0;var i=n(3329),o=function(){function e(){this.audio=document.querySelector("audio"),this.unmuteSpeaker=document.querySelector(".fa-volume-up"),this.muteSpeaker=document.querySelector(".fa-volume-off"),this.audioState=!0,this.volumeLocalStorage=+localStorage.getItem("volume"),this.volume=this.volumeLocalStorage?this.volumeLocalStorage:i.AUDIO_DEFAULT_VOLUME,this._init()}return e.prototype.changeAudioSource=function(e){this.audio.src=e},e.prototype.audioSettings=function(e){this.audioState=0!=e,this.changeSpeakerState(),this.changeAudioVolume(e),this.playAudio(e)},e.prototype.playAudio=function(e){this.audio.volume=null!=e?e:this.volume},e.prototype._init=function(){this.bindEvents(),this.playAudio()},e.prototype.handleAudioStateChange=function(){this.audioState=!this.audioState,this.changeSpeakerState()},e.prototype.changeSpeakerState=function(){this.audioState?(this.unmute(),this.unmuteSpeaker.classList.remove("hide"),this.unmuteSpeaker.classList.add("show"),this.muteSpeaker.classList.remove("show"),this.muteSpeaker.classList.add("hide")):(this.mute(),this.unmuteSpeaker.classList.remove("show"),this.unmuteSpeaker.classList.add("hide"),this.muteSpeaker.classList.remove("hide"),this.muteSpeaker.classList.add("show"))},e.prototype.bindEvents=function(){var e=this;this.unmuteSpeaker.addEventListener("click",(function(){return e.handleAudioStateChange()})),this.muteSpeaker.addEventListener("click",(function(){return e.handleAudioStateChange()}))},e.prototype.changeAudioVolume=function(e){this.volume=e},e.prototype.mute=function(){this.audio.volume=0},e.prototype.unmute=function(){this.audio.volume=this.volume},e}();t.Audio=o},8020:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Battle=void 0;var i=n(5047),o=n(6296),s=n(7962),a=function(){function e(e,t){this.audio=e,this.game=t,this.getUIElements()}return e.prototype.getUIElements=function(){this.mainArea=document.querySelector(".main-area"),this.gameMessagesContainer=document.querySelector(".game-messages-container"),this.nextAttackInfoContainer=document.querySelector(".next-attack-info"),this.battleContainer=i.createElement({type:"div",classes:["battle__container"]}),this.battleOverlay=i.createElement({type:"div",classes:["battle__overlay"]})},e.prototype.createBattle=function(){var e=i.createElement({type:"h1",classes:["battle__heading"],content:"Your village is under attack!!"}),t=i.createElement({type:"div",classes:["battle__effects-container"]}),o=i.createElement({type:"img",classes:["battle__effects-right"]}),s=n(4092);o.setAttribute("src",s.default);var a=i.createElement({type:"img",classes:["battle__effects-left"]});a.setAttribute("src",s.default),t.append(a,o),this.battleContainer.append(e,t)},e.prototype.renderBattle=function(){var e;2===this.mainArea.childElementCount&&(this.mainArea.style.zIndex="200",this.mainArea.insertBefore(this.battleContainer,this.nextAttackInfoContainer),null===(e=document.querySelector(".game__screen"))||void 0===e||e.appendChild(this.battleOverlay),this.gameMessagesContainer.style.transform="translateY(-140%)",this.nextAttackInfoContainer.style.opacity="0",this.createBattle(),this.audio.changeAudioSource(s.default))},e.prototype.removeBattle=function(){var e=this;if("0"==this.nextAttackInfoContainer.style.opacity){var t=document.querySelector(".battle__container"),n=document.querySelector(".battle__overlay");this.mainArea.style.zIndex="0",t.style.animationName="battleExit",this.audio.changeAudioSource(o.default),this.nextAttackInfoContainer.style.opacity="1",n.remove(),setTimeout((function(){e.gameMessagesContainer.style.transform="translateY(0)",t.remove()}),1e3)}},e.prototype.handleBattle=function(){this.game.isAttackInProgress()?this.renderBattle():this.removeBattle()},e}();t.Battle=a},7438:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GameOverModal=void 0;var i=n(2860),o=n(3805),s=function(){function e(e){this.game=e}return e.prototype.show=function(e){o.renderPopup({headerText:"Game Over",popupContentHTML:this.createModalContent(),closeBtnText:"Return to Main Screen",isOverlayClickable:!1}),this.bindEvents(e)},e.prototype.bindEvents=function(e){document.querySelector(".popup__close-btn").addEventListener("click",(function(){e()}))},e.prototype.createModalContent=function(){var e=this.game.getSurvivedAttacks(),t='\n    <h2 class="game-over__heading">Your game is over!</h2>\n    <div class="game-over__statistics">\n        <p>Your statistics:</p>\n        <ul>\n            <li>\n                <span>Game time: '+this.getGameTime()+"</span>\n            </li>\n            <li>\n                <span>You have survived "+e+" "+(1==e?"attack":"attacks")+"</span>\n            </li>\n        </ul>\n    </div>\n";return i.createElement({type:"div",classes:["game-over__content"],innerHTML:t})},e.prototype.getGameTime=function(){return i.secondsToDate(this.game.getGameElapsedTimeInSeconds())},e}();t.GameOverModal=s},3752:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GameSettingsModal=void 0;var i=n(4457),o=n(3805),s=n(2860),a=function(){function e(e,t){var n;this.settingsBtn=document.querySelector("#settings-button"),this.audioElement=document.querySelector("audio"),this.currentVolume=null===(n=this.audioElement)||void 0===n?void 0:n.volume,this.app=e,this.audio=t,this.currentDifficulty=this.app.gameSettings.difficulty,this.render()}return e.prototype.getCurrentVolumeValue=function(){var e,t=100*(null===(e=this.audioElement)||void 0===e?void 0:e.volume);this.currentVolume=this.audioElement.volume;var n=document.querySelector(".volume__input");null==n||n.setAttribute("value",""+t)},e.prototype.getCurrentGameDifficulty=function(){var e=localStorage.getItem("difficulty");if(e){document.querySelector("#difficulty-"+e).checked=!0}else{switch(this.app.gameSettings.difficulty){case i.Difficulty.Easy:document.querySelector("#difficulty-easy").checked=!0;break;case i.Difficulty.Medium:document.querySelector("#difficulty-medium").checked=!0;break;case i.Difficulty.Hard:document.querySelector("#difficulty-hard").checked=!0}this.currentDifficulty=this.app.gameSettings.difficulty}},e.prototype.addListeners=function(){var e=this,t=document.querySelector(".volume__input");null==t||t.addEventListener("input",(function(){var n=+t.value/100;e.currentVolume=n,e.audio.playAudio(n)}));var n=document.querySelector("#difficulty-easy");null==n||n.addEventListener("change",(function(){e.app.gameSettings.difficulty=i.Difficulty.Easy,localStorage.setItem("difficulty","easy")}));var s=document.querySelector("#difficulty-medium");null==s||s.addEventListener("change",(function(){e.app.gameSettings.difficulty=i.Difficulty.Medium,localStorage.setItem("difficulty","medium")}));var a=document.querySelector("#difficulty-hard");null==a||a.addEventListener("change",(function(){e.app.gameSettings.difficulty=i.Difficulty.Hard,localStorage.setItem("difficulty","hard")})),document.querySelector(".popup__close-btn").addEventListener("click",(function(){e.audio.audioSettings(e.currentVolume),localStorage.setItem("volume",""+e.currentVolume),document.querySelector(".popup").classList.remove("popup--active"),o.removePopup()})),document.querySelector(".popup__overlay").addEventListener("click",(function(){e.app.gameSettings.difficulty=e.currentDifficulty}))},e.prototype.createElements=function(){var e=s.createElement({type:"div",classes:["settings__wrapper"]}),t=s.createElement({type:"h2",classes:["volume__heading"],content:"Volume"}),n=s.createElement({type:"p",classes:["volume__paragraph"],content:"\n        If you want to listean to background music, you need to enable audio in the site preferences!\n      "}),i=s.createElement({type:"input",classes:["volume__input"]});i.setAttribute("type","range"),i.setAttribute("min","0"),i.setAttribute("max","100");var o=s.createElement({type:"h2",classes:["difficulty__heading"],content:"Select Game Difficulty"}),a=s.createElement({type:"div",classes:["difficulty"]}),r=s.createElement({type:"input",classes:["difficulty__input"],id:"difficulty-easy"});r.setAttribute("type","radio"),r.setAttribute("name","difficulty"),r.setAttribute("value","easy");var u=s.createElement({type:"label",content:"Easy"});u.setAttribute("for","difficulty-easy");var l=s.createElement({type:"div",classes:["difficulty"]}),c=s.createElement({type:"input",classes:["difficulty__input"],id:"difficulty-medium"});c.setAttribute("type","radio"),c.setAttribute("name","difficulty"),c.setAttribute("value","medium"),c.setAttribute("checked","true");var d=s.createElement({type:"label",content:"Medium"});d.setAttribute("for","difficulty-medium");var p=s.createElement({type:"div",classes:["difficulty"]}),h=s.createElement({type:"input",classes:["difficulty__input"],id:"difficulty-hard"});h.setAttribute("type","radio"),h.setAttribute("name","difficulty"),h.setAttribute("value","hard");var m=s.createElement({type:"label",content:"Hard"});return m.setAttribute("for","difficulty-hard"),a.appendChild(r),a.appendChild(u),l.appendChild(c),l.appendChild(d),p.appendChild(h),p.appendChild(m),e.append(t,n,i,o,a,l,p),e},e.prototype.render=function(){var e=this;this.settingsBtn.addEventListener("click",(function(){o.renderPopup({headerText:"Settings",popupContentHTML:e.createElements(),closeBtnText:"Save and Close"}),e.addListeners(),e.getCurrentVolumeValue(),e.getCurrentGameDifficulty()}))},e}();t.GameSettingsModal=a},455:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(3805),t),o(n(2156),t),o(n(3752),t),o(n(7438),t),o(n(8020),t),o(n(2982),t)},2156:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InfoModal=void 0;var i=n(3805),o=n(2860),s=function(){function e(){this.openInfoBtn=document.querySelector("#info-button"),this._init()}return e.prototype._init=function(){var e;null===(e=this.openInfoBtn)||void 0===e||e.addEventListener("click",this.render.bind(this))},e.prototype.render=function(){var e=o.createElement({type:"div",classes:["info__wrapper"]}),t=o.createElement({type:"div"}),n=o.createElement({type:"p",classes:["info__desc"],content:"\n      Are you ready to conquer the world? Today you can follow in the footsteps of history's greatest commanders.\n      \n      Your task in this game is to develop your own village, from a small settlement to a large fortified stronghold, to create a strong army that will stand up to invaders. Face your opponents and protect your village! \n      "}),s=o.createElement({type:"h2",classes:["authors__header"],content:"Authors"}),a=o.createElement({type:"ul",classes:["authors__list"],innerHTML:'\n          <li class="author">\n            <div class="author__container">\n              <div class="author__front">\n                  <div class="author__content">Piotr Dybowski <span class="author__content-mobile">- Mentor / Client</span></div>\n              </div>\n              <div class="author__back">\n                  <div class="author__content">\n                    <i class="fas fa-user-tie author__icon"></i>\n                    <span class="author__position">Mentor<br />Client</span>\n                  </div>\n              </div>\n            </div>\n          </li>\n          <li class="author">\n              <div class="author__container">\n                <div class="author__front">\n                    <div class="author__content">Ireneusz Bednorz <span class="author__content-mobile">- Product Owner</span></div>\n                </div>\n                <div class="author__back">\n                    <div class="author__content">\n                      <i class="fas fa-hiking author__icon"></i>\n                      <span class="author__position">Product<br />Owner</span>\n                    </div>\n                </div>\n              </div>\n          </li>\n          <li class="author">\n              <div class="author__container">\n                <div class="author__front">\n                    <div class="author__content">Szymon Kin <span class="author__content-mobile">- Dev Menager</span></div>\n                </div>\n                <div class="author__back">\n                    <div class="author__content">\n                      <i class="fas fa-user-ninja author__icon"></i>\n                      <span class="author__position">Dev<br />Manager</span>\n                    </div>\n                </div>\n              </div>\n          </li>\n          <li class="author">\n              <div class="author__container">\n                <div class="author__front">\n                    <div class="author__content">Bartosz Białecki <span class="author__content-mobile">- Tech Lead</span></div>\n                </div>\n                <div class="author__back">\n                    <div class="author__content">\n                      <i class="fas fa-user-secret author__icon"></i>\n                      <span class="author__position">Tech<br />Lead</span>\n                    </div>\n                </div>\n              </div>\n          </li>\n          <li class="author">\n              <div class="author__container">\n                <div class="author__front">\n                    <div class="author__content">Aleksandra Jankowska <span class="author__content-mobile">- Developer</span></div>\n                </div>\n                <div class="author__back">\n                    <div class="author__content">\n                      <i class="fas fa-user-cog author__icon"></i>\n                      <span class="author__position">Developer</span>\n                    </div>\n                </div>\n              </div>\n          </li>\n          <li class="author">\n            <div class="author__container">\n              <div class="author__front">\n                  <div class="author__content">Jakub Góra <span class="author__content-mobile">- Developer</span></div>\n              </div>\n              <div class="author__back">\n                  <div class="author__content">\n                    <i class="fas fa-user-cog author__icon"></i>\n                    <span class="author__position">Developer</span>\n                  </div>\n              </div>\n            </div>\n          </li>\n        '});e.append(t),t.append(n,s,a),i.renderPopup({headerText:"Info",popupContentHTML:e,closeBtnText:"Close"})},e}();t.InfoModal=s},3805:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removePopup=t.renderPopup=void 0;var i=n(2860);function o(){var e=document.querySelector(".popup");setTimeout((function(){document.body.removeChild(e)}),200)}t.renderPopup=function(e){var t,n,s=e.headerText,a=e.popupContentHTML,r=e.closeBtnText,u=e.isOverlayClickable,l=void 0===u||u,c=e.additionalBtn,d=i.createElement({type:"div",classes:["popup"],innerHTML:'\n      <div class="popup__overlay"></div>\n        <div class="popup__content">\n          <div class="popup__header">\n            <h1>'+s+'</h1>\n          </div>\n          <div class="popup__body">\n            <div class="popup__body-content">\n            </div>\n          </div>\n          <div class="popup__footer">\n            <button class="popup__close-btn">'+r+"</button>\n          </div>\n        </div>\n      </div>\n    "});if(document.body.appendChild(d),null===(t=document.querySelector(".popup__body-content"))||void 0===t||t.appendChild(a),c){var p=i.createElement({type:"button",content:c.content,classes:c.classes});if(c.handleEvent)for(var h=0,m=Object.entries(c.handleEvent);h<m.length;h++){var g=m[h],f=g[0],y=g[1];p.addEventListener(f,y)}null===(n=document.querySelector(".popup__footer"))||void 0===n||n.appendChild(p)}setTimeout((function(){(d.classList.add("popup--active"),l)&&document.querySelector(".popup__overlay").addEventListener("click",(function(){d.classList.remove("popup--active"),o()}));document.querySelector(".popup__close-btn").addEventListener("click",(function(){d.classList.remove("popup--active"),o()}))}),10)},t.removePopup=o},2982:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuitModal=void 0;var i=n(3805),o=n(2860),s=function(){function e(e,t){this.gamePage=e,this.game=t,this.gamePage=e,this.game=t,this.quitContainer=o.createElement({type:"div",classes:["quit__container"]}),this.createElements()}return e.prototype.createElements=function(){var e=o.createElement({type:"h2",classes:["quit__heading"],innerHTML:"You would not be able to get back!"});this.quitContainer.append(e)},e.prototype.render=function(){var e=this;i.renderPopup({headerText:"Do you really want to quit the game?",popupContentHTML:this.quitContainer,closeBtnText:"Cancel",isOverlayClickable:!0,additionalBtn:{type:"btn",content:"Yes, I am aware of that",classes:["popup__close-btn","quit__yes-btn"],handleEvent:{click:function(){i.removePopup(),e.gamePage.quitGame()}}}}),this.game.pauseGame(),document.querySelector(".popup__overlay").addEventListener("click",(function(){e.game.unpauseGame()})),document.querySelector(".popup__close-btn").addEventListener("click",(function(){e.game.unpauseGame()}))},e}();t.QuitModal=s},2014:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestModal=void 0;var i=n(2860),o=n(3805),s=function(){function e(e){this.gameSettings=e}return e.prototype.show=function(){o.renderPopup({headerText:"Test",popupContentHTML:this.createModalContent(),closeBtnText:"Save"}),this.bindEvents()},e.prototype.bindEvents=function(){var e=this,t=document.querySelector("#gold"),n=document.querySelector("#wood"),i=document.querySelector("#stone"),o=document.querySelector("#population"),s=document.querySelector("#storageCapacity"),a=document.querySelector("#easyCountdown"),r=document.querySelector("#mediumCountdown"),u=document.querySelector("#hardCountdown"),l=document.querySelector("#barracksBuildTime"),c=document.querySelector("#goldmineBuildTime"),d=document.querySelector("#houseBuildTime"),p=document.querySelector("#quarryBuildTime"),h=document.querySelector("#sawmillBuildTime"),m=document.querySelector("#townHallBuildTime"),g=document.querySelector("#wallBuildTime"),f=document.querySelector("#warehouseBuildTime"),y=document.querySelector("#warriorRecruitTime");document.querySelector(".popup__close-btn").addEventListener("click",(function(){e.gameSettings.initialGoldAmount=parseInt(t.value),e.gameSettings.initialWoodAmount=parseInt(n.value),e.gameSettings.initialStoneAmount=parseInt(i.value),e.gameSettings.initialPopulation=parseInt(o.value),e.gameSettings.initialStorageCapacity=parseInt(s.value),e.gameSettings.easyDifficultyAttackCountdownInMiliseconds=1e3*parseInt(a.value),e.gameSettings.mediumDifficultyAttackCountdownInMiliseconds=1e3*parseInt(r.value),e.gameSettings.hardDifficultyAttackCountdownInMiliseconds=1e3*parseInt(u.value),e.gameSettings.barracksDefaultTimeToBuildInMiliseconds=1e3*parseInt(l.value),e.gameSettings.goldmineDefaultTimeToBuildInMiliseconds=1e3*parseInt(c.value),e.gameSettings.houseDefaultTimeToBuildInMiliseconds=1e3*parseInt(d.value),e.gameSettings.quarryDefaultTimeToBuildInMiliseconds=1e3*parseInt(p.value),e.gameSettings.sawmillDefaultTimeToBuildInMiliseconds=1e3*parseInt(h.value),e.gameSettings.townhallDefaultTimeToBuildInMiliseconds=1e3*parseInt(m.value),e.gameSettings.wallDefaultTimeToBuildInMiliseconds=1e3*parseInt(g.value),e.gameSettings.warehouseDefaultTimeToBuildInMiliseconds=1e3*parseInt(f.value),e.gameSettings.warriorDefaultTimeToRecruitInMiliseconds=1e3*parseInt(y.value)}))},e.prototype.createModalContent=function(){var e='\n    <h2 class="test-modal__heading">Change the settings of the game!</h2>\n    <div class="test-modal__settings">\n        <label for="gold" class="test-modal__label">Initial Gold Amount</label>\n        <input type="number" name="gold" id="gold" value="'+this.gameSettings.initialGoldAmount+'" />\n\n        <label for="wood" class="test-modal__label">Initial Wood Amount</label>\n        <input type="number" name="wood" id="wood" value="'+this.gameSettings.initialWoodAmount+'" />\n\n        <label for="stone" class="test-modal__label">Initial Stone Amount</label>\n        <input type="number" name="stone" id="stone" value="'+this.gameSettings.initialStoneAmount+'" />\n\n        <label for="population" class="test-modal__label">Initial Population</label>\n        <input type="number" name="population" id="population" value="'+this.gameSettings.initialPopulation+'" />\n\n        <label for="storageCapacity" class="test-modal__label">Initial Storage Capacity</label>\n        <input type="number" name="storageCapacity" id="storageCapacity" value="'+this.gameSettings.initialStorageCapacity+'" />\n\n        <label for="easyCountdown" class="test-modal__label">Easy Difficulty Attack Countdown (in seconds)</label>\n        <input type="number" name="easyCountdown" id="easyCountdown" value="'+this.gameSettings.easyDifficultyAttackCountdownInMiliseconds/1e3+'" />\n\n        <label for="mediumCountdown" class="test-modal__label">Medium Difficulty Attack Countdown (in seconds)</label>\n        <input type="number" name="mediumCountdown" id="mediumCountdown" value="'+this.gameSettings.mediumDifficultyAttackCountdownInMiliseconds/1e3+'" />\n\n        <label for="hardCountdown" class="test-modal__label">Hard Difficulty Attack Countdown (in seconds)</label>\n        <input type="number" name="hardCountdown" id="hardCountdown" value="'+this.gameSettings.hardDifficultyAttackCountdownInMiliseconds/1e3+'" />\n\n        <label for="barracksBuildTime" class="test-modal__label">Barracks Build Time (in seconds)</label>\n        <input type="number" name="barracksBuildTime" id="barracksBuildTime" value="'+this.gameSettings.barracksDefaultTimeToBuildInMiliseconds/1e3+'" />\n\n        <label for="goldmineBuildTime" class="test-modal__label">Gold Mine Build Time (in seconds)</label>\n        <input type="number" name="goldmineBuildTime" id="goldmineBuildTime" value="'+this.gameSettings.goldmineDefaultTimeToBuildInMiliseconds/1e3+'" />\n\n        <label for="houseBuildTime" class="test-modal__label">House Build Time (in seconds)</label>\n        <input type="number" name="houseBuildTime" id="houseBuildTime" value="'+this.gameSettings.houseDefaultTimeToBuildInMiliseconds/1e3+'" />\n\n        <label for="quarryBuildTime" class="test-modal__label">Quarry Build Time (in seconds)</label>\n        <input type="number" name="quarryBuildTime" id="quarryBuildTime" value="'+this.gameSettings.quarryDefaultTimeToBuildInMiliseconds/1e3+'" />\n\n        <label for="sawmillBuildTime" class="test-modal__label">Sawmill Build Time (in seconds)</label>\n        <input type="number" name="sawmillBuildTime" id="sawmillBuildTime" value="'+this.gameSettings.sawmillDefaultTimeToBuildInMiliseconds/1e3+'" />\n\n        <label for="townHallBuildTime" class="test-modal__label">Town Hall Build Time (in seconds)</label>\n        <input type="number" name="townHallBuildTime" id="townHallBuildTime" value="'+this.gameSettings.townhallDefaultTimeToBuildInMiliseconds/1e3+'" />\n\n        <label for="wallBuildTime" class="test-modal__label">Wall Build Time (in seconds)</label>\n        <input type="number" name="wallBuildTime" id="wallBuildTime" value="'+this.gameSettings.wallDefaultTimeToBuildInMiliseconds/1e3+'" />\n\n        <label for="warehouseBuildTime" class="test-modal__label">Warehouse Build Time (in seconds)</label>\n        <input type="number" name="warehouseBuildTime" id="warehouseBuildTime" value="'+this.gameSettings.warehouseDefaultTimeToBuildInMiliseconds/1e3+'" />\n\n        <label for="warriorRecruitTime" class="test-modal__label">Warrior Recruit Time (in seconds)</label>\n        <input type="number" name="warriorRecruitTime" id="warriorRecruitTime" value="'+this.gameSettings.warriorDefaultTimeToRecruitInMiliseconds/1e3+'" />\n    </div>\n';return i.createElement({type:"div",classes:["test-modal__content"],innerHTML:e})},e}();t.TestModal=s},114:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DOMElements=void 0,t.DOMElements={gameScreenTemplateSelector:"#game-screen-template",gameScreenSelector:".game__screen",gameScreenOpenedClass:"game__screen--opened",quitButtonSelector:".quit-button",fractionImageSelector:".fraction__image",goldAmountSelector:"#goldAmount",woodAmountSelector:"#woodAmount",stoneAmountSelector:"#stoneAmount",populationCountSelector:".population__count",defenceCountSelector:".defence__count",unitsCountSelector:".units__count",addUnitsButtonSelector:".units__add-button",gameMessagesSelector:".game-messages",nextAttackProgressBarSelector:".next-attack-progress-bar",nextAttackHeaderSelector:".info__heading",buildingProgressBarClass:"building__progress-bar",buildingUpgradeButtonClass:"building__upgrade-button",gameMessagesItemClass:"game-messages__item",buildingClass:"building",buildingHeadingClass:"building__heading",buildingListSelector:".buildings__list",buildingListItemClass:"buildings__list-item",buildingLevelClass:"building__level",buildingPriceClass:"building__price",buildingProgressClass:"building__progress",buildingDetailsClass:"building__details",buildingDetailsTitleClass:"building__details-title",buildingDetailsDescriptionClass:"building__details-description",buildingDetailsResourcesClass:"building__details-resources",startScreenTemplateID:"start-screen-template",startScreenHiddenClass:"start__screen--hidden",startScreenOpenedClass:"start__screen--opened",startScreenClosedClass:"start__screen--closed",settingBtnID:"settings-button",infoBtnID:"info-button",startGameBtnID:"start-game-button",characterDropdownID:"character-dropdown",startScreenClass:"start__screen",startScreenBgClass:"start__screen--background",startScreenLogoClass:"start__screen__logo",startScreenBtnOption:"start__screen__button--option",startScreenLogoBgClass:"start__screen__logo--background",startScreenBtnOptionSelected:"start__screen__button--option--selected",backgroundAnimation:"background__animation",logoAnimationOneClass:"logo__animation--one",logoAnimationTwoClass:"logo__animation--two",splashScreenID:"splash-screen-template",splashScreenClosedClass:"splash__screen--closed",splashScreenClass:"splash__screen",splashScreenLoadingBar:"splash__loading-bar",splashScreenLoadingPercentCLass:"splash__loading-percent"}},7750:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AUDIO_DEFAULT_VOLUME=void 0,t.AUDIO_DEFAULT_VOLUME=.7},6031:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EVENTS_DELAY_IN_MILISECONDS=t.GAME_LOOP_DELAY_IN_MILISECONDS=void 0,t.GAME_LOOP_DELAY_IN_MILISECONDS=100,t.EVENTS_DELAY_IN_MILISECONDS=12e4},3329:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(6031),t),o(n(7750),t),o(n(1816),t),o(n(114),t)},1816:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_SECOND=void 0,t.ONE_SECOND=1e3},506:function(e,t,n){"use strict";var i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),o=0;for(t=0;t<n;t++)for(var s=arguments[t],a=0,r=s.length;a<r;a++,o++)i[o]=s[a];return i};Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;var o=n(3329),s=n(4457),a=n(2860),r=function(){function e(e){this.gameSettings=e,this.resources=[{type:s.ResourceType.Gold,count:0},{type:s.ResourceType.Wood,count:0},{type:s.ResourceType.Stone,count:0}],this.storageCapacity=0,this.villageDefence=0,this.buildings=[],this.villageUnits=[],this.population=0,this.elapsedTimeInMilliseconds=0,this.startTime=0,this.peaceTime=0,this.peaceTimeDuration=0,this.attackDurationInMiliseconds=5e3,this.attackDuration=0,this.attackStartTime=0,this.attackInProgress=!1,this.nextAttackTotalInMiliseconds=0,this.attackSurvived=0,this.gameMessages=[],this.isGamePaused=!1,this.pauseStartTime=0,this.pauseTimeInMiliseconds=0}return e.prototype.start=function(e){var t=this;this.onGameUpdate=e,this.addBuildings(),this.initData(),this.startTime=Date.now(),this.peaceTime=Date.now(),this.intervalId=window.setInterval((function(){return t.update()}),o.GAME_LOOP_DELAY_IN_MILISECONDS),this.addGameMessage({message:"Welcome! Start managing your village and protect it from nasty goblins.",type:s.MessageType.INFO})},e.prototype.stop=function(){this.stopGameLoop(),this.resetGame()},e.prototype.startRecruitingUnit=function(e){this.canRecruitUnit(e)?this.hasBarrackEnoghCapacity()?(e.startRecruiting(),this.changeGoldAmount(this.getGoldAmount()-e.goldNeededToRecruit),this.villageUnits.push(e),this.addGameMessage({message:"You have started recruiting the "+e.getTitle()+".",type:s.MessageType.INFO})):this.addGameMessage({message:"There is no room in the barracks for your units. Please upgrade it if you want to recruit a new unit.",type:s.MessageType.WARNING}):this.addGameMessage({message:"You cannot recruit the "+e.getTitle(),type:s.MessageType.WARNING})},e.prototype.hasAvailableResources=function(e){var t=this,n=!0;return e.forEach((function(e){var i=t.getResourceForType(e.type);i?i.count<e.count&&(n=!1):n=!1})),n},e.prototype.handleStartingConstructionOfBuilding=function(e){this.updateResources(e.getResourcesNeededToBuild())},e.prototype.handleBuildingWasBuilt=function(e){e instanceof s.House?this.handleHouseWasBuilt(e):e instanceof s.Wall?this.handlewWallWasBuilt(e):e instanceof s.Warehouse?this.handleWarehouseWasBuilt(e):e instanceof s.TownHall&&this.reduceTimeBuilding()},e.prototype.getBuildings=function(){return this.buildings},e.prototype.getGoldAmount=function(){var e;return(null===(e=this.getResourceForType(s.ResourceType.Gold))||void 0===e?void 0:e.count)||0},e.prototype.getWoodAmount=function(){var e;return(null===(e=this.getResourceForType(s.ResourceType.Wood))||void 0===e?void 0:e.count)||0},e.prototype.getStoneAmount=function(){var e;return(null===(e=this.getResourceForType(s.ResourceType.Stone))||void 0===e?void 0:e.count)||0},e.prototype.getPopulation=function(){return this.population},e.prototype.getVillageDefence=function(){return this.getUnitsDefence(this.villageUnits)+this.villageDefence},e.prototype.getRecruitedUnits=function(){return this.villageUnits.filter((function(e){return e.isRecruited()})).length},e.prototype.getNextAttackTotal=function(){return this.nextAttackTotalInMiliseconds},e.prototype.getPeaceTimeDuration=function(){return this.peaceTimeDuration},e.prototype.getBuilding=function(e){return this.buildings.find((function(t){return t.id===e}))},e.prototype.getGameElapsedTimeInSeconds=function(){return this.elapsedTimeInMilliseconds/1e3},e.prototype.getSurvivedAttacks=function(){return this.attackSurvived},e.prototype.isGameOver=function(){return this.population<=0},e.prototype.isAttackInProgress=function(){return this.attackInProgress},e.prototype.getGameMessages=function(){return this.gameMessages},e.prototype.addGameMessage=function(e){this.gameMessages.push(e)},e.prototype.getTotalResourceCount=function(){return this.getGoldAmount()+this.getWoodAmount()+this.getStoneAmount()},e.prototype.handleGoldmineWasBuilt=function(e){var t=e.getProduction();this.getTotalResourceCount()+t>this.storageCapacity?(this.changeGoldAmount(this.storageCapacity-(this.getStoneAmount()+this.getWoodAmount())),this.addGameMessage({message:"Watch out! Storage is filled to the brim. There is no more room for your precious gold. Upgrade Warehouse to increase storage capacity.",type:s.MessageType.WARNING})):(this.changeGoldAmount(this.getGoldAmount()+t),this.addGameMessage({message:"The miners did their best. You have got "+t+" gold "+(1===t?"bar":"bars")+".",type:s.MessageType.INFO}))},e.prototype.handleQuarryWasBuilt=function(e){var t=e.getProduction();this.getTotalResourceCount()+t>this.storageCapacity?(this.changeStoneAmount(this.storageCapacity-(this.getWoodAmount()+this.getGoldAmount())),this.addGameMessage({message:"Ahh, your storage is full. Upgrade Warehouse, so you can find room for your stone.",type:s.MessageType.WARNING})):(this.changeStoneAmount(this.getStoneAmount()+t),this.addGameMessage({message:"Good day. You have got "+t+" "+(1===t?"stone":"stones")+".",type:s.MessageType.INFO}))},e.prototype.handleSawmillWasBuilt=function(e){var t=e.getProduction();this.getTotalResourceCount()+t>this.storageCapacity?(this.changeWoodAmount(this.storageCapacity-(this.getStoneAmount()+this.getGoldAmount())),this.addGameMessage({message:"Oh no, there is no more room for your wood. Upgrade Warehouse to increase your storage capacity.",type:s.MessageType.WARNING})):(this.addGameMessage({message:"The sawmill is going strong. You have got "+t+"  "+(1===t?"log":"logs")+" of wood.",type:s.MessageType.INFO}),this.changeWoodAmount(this.getWoodAmount()+t))},e.prototype.unpauseGame=function(){this.startTime+=this.pauseTimeInMiliseconds,this.elapsedTimeInMilliseconds+=this.pauseTimeInMiliseconds,this.peaceTimeDuration+=this.pauseTimeInMiliseconds,this.nextAttackTotalInMiliseconds+=this.pauseTimeInMiliseconds,this.isGamePaused=!1},e.prototype.pauseGame=function(){this.pauseStartTime=Date.now(),this.pauseTimeInMiliseconds=0,this.isGamePaused=!0},e.prototype.stopGameLoop=function(){window.clearInterval(this.intervalId)},e.prototype.update=function(){this.isGamePaused?this.pauseTimeInMiliseconds=Date.now()-this.pauseStartTime:(this.updateBuildings(),this.updateUnits(),this.checkIfRandomEvent(),this.onGameUpdate&&this.onGameUpdate(),this.isGameOver()?this.stopGameLoop():(this.elapsedTimeInMilliseconds=Date.now()-this.startTime,this.attackInProgress||(this.peaceTimeDuration=Date.now()-this.peaceTime),(this.attackInProgress||this.peaceTimeDuration>=this.nextAttackTotalInMiliseconds)&&(this.attackInProgress||(this.attackInProgress=!0,this.attackStartTime=Date.now()),this.attackDuration=Date.now()-this.attackStartTime,this.attackDuration+1e3>=this.attackDurationInMiliseconds&&(this.peaceTimeDuration=0,this.nextAttackTotalInMiliseconds=this.calculateNextAttack(),!this.isGameOver()&&this.onGameUpdate&&this.onGameUpdate()),this.attackDuration>=this.attackDurationInMiliseconds&&(this.attackInProgress=!1,this.attackStartTime=0,this.attackDuration=0),this.attackInProgress||(this.peaceTimeDuration=0,this.peaceTime=Date.now(),this.nextAttackTotalInMiliseconds=this.calculateNextAttack(),this.handleAttack()))))},e.prototype.initData=function(){this.storageCapacity=this.gameSettings.initialStorageCapacity,this.population=this.gameSettings.initialPopulation,this.changeGoldAmount(this.gameSettings.initialGoldAmount),this.changeWoodAmount(this.gameSettings.initialWoodAmount),this.changeStoneAmount(this.gameSettings.initialStoneAmount),this.nextAttackTotalInMiliseconds=this.calculateNextAttack()},e.prototype.resetGame=function(){this.villageDefence=0,this.buildings=[],this.villageUnits=[],this.startTime=0,this.elapsedTimeInMilliseconds=0,this.peaceTime=0,this.peaceTimeDuration=0,this.attackDuration=0,this.attackStartTime=0,this.attackInProgress=!1,this.nextAttackTotalInMiliseconds=this.calculateNextAttack(),this.attackSurvived=0,this.isGamePaused=!1,this.pauseStartTime=0,this.pauseTimeInMiliseconds=0,this.initData()},e.prototype.addBuildings=function(){this.addBuilding(new s.TownHall(this)),this.addBuilding(new s.Barracks(this)),this.addBuilding(new s.Warehouse(this)),this.addBuilding(new s.House(this)),this.addBuilding(new s.Wall(this)),this.addBuilding(new s.Goldmine(this)),this.addBuilding(new s.Quarry(this)),this.addBuilding(new s.Sawmill(this))},e.prototype.addBuilding=function(e){this.buildings.push(e)},e.prototype.getResourceForType=function(e){return this.resources.find((function(t){return t.type===e}))},e.prototype.updateResources=function(e){var t=this;e.forEach((function(e){var n=t.getResourceForType(e.type);n&&(n.count-=e.count)}))},e.prototype.canRecruitUnit=function(e){return this.hasAvailableResources([{type:s.ResourceType.Gold,count:e.goldNeededToRecruit}])&&this.villageUnits.length<this.population},e.prototype.hasBarrackEnoghCapacity=function(){var e=this.getBarracks();return!!e&&this.villageUnits.length<e.getCapacity()},e.prototype.changeGoldAmount=function(e){var t=this.getResourceForType(s.ResourceType.Gold);t&&(t.count=e)},e.prototype.changeWoodAmount=function(e){var t=this.getResourceForType(s.ResourceType.Wood);t&&(t.count=e)},e.prototype.changeStoneAmount=function(e){var t=this.getResourceForType(s.ResourceType.Stone);t&&(t.count=e)},e.prototype.handleHouseWasBuilt=function(e){this.addGameMessage({message:"Your village is growing. "+e.population+" new residents have arrived.",type:s.MessageType.INFO}),this.population+=e.population},e.prototype.handlewWallWasBuilt=function(e){this.addGameMessage({message:"The new wall added "+e.getDefence()+" points to your defence.",type:s.MessageType.INFO}),this.villageDefence+=e.getDefence()},e.prototype.handleWarehouseWasBuilt=function(e){this.addGameMessage({message:"The capacity of the resource locker has increased. You can now store "+this.storageCapacity+" resources.",type:s.MessageType.INFO}),this.storageCapacity+=parseInt((1.5*e.capacity).toFixed(0))},e.prototype.checkIfRandomEvent=function(){this.elapsedTimeInMilliseconds<o.EVENTS_DELAY_IN_MILISECONDS||Math.floor(1e4*Math.random())<30&&this.handleRandomEvent()},e.prototype.handleRandomEvent=function(){switch(Math.floor(8*Math.random())){case 0:this.handleRandomGoldStealEvent();break;case 1:this.handleRandomBuilidngLevelDecreaseEvent();break;case 2:this.handleRandomWoodIncreaseEvent();break;case 3:this.handleMurderEvent();break;case 4:this.handleBornEvent();break;case 5:this.handleRandomTradeEvent();break;case 6:this.handleRandomStoneIncreaseEvent();break;case 7:this.handleRandomDefenceIncreaseEvent()}},e.prototype.handleRandomGoldStealEvent=function(){if(0!==this.getGoldAmount()){var e=Math.floor(.05*this.getGoldAmount());if(!(e<1)){var t=Math.floor(.95*this.getGoldAmount());this.changeGoldAmount(t),this.addGameMessage({message:"Oh no, thieves have stolen "+e+" gold from your storage",type:s.MessageType.ERROR})}}},e.prototype.handleRandomBuilidngLevelDecreaseEvent=function(){var e=this.buildings[Math.floor(Math.random()*this.buildings.length-1)];e&&e.destroyBuildingLevel()},e.prototype.handleMurderEvent=function(){this.population--,this.addGameMessage({message:"There was a murder in your village and population decreased by 1",type:s.MessageType.ERROR})},e.prototype.handleBornEvent=function(){this.population++,this.addGameMessage({message:"New child was born in your village and your population increased by 1",type:s.MessageType.SUCCESS})},e.prototype.handleRandomWoodIncreaseEvent=function(){var e=this.getBuilding(s.Sawmill.id);if(e&&!(e.getLevel()<1)){var t=Math.floor(1.05*this.getWoodAmount());t<1||this.getTotalResourceCount()-this.getWoodAmount()+t>this.storageCapacity||(this.changeWoodAmount(t),this.addGameMessage({message:"Your loggers did awesome job and produced "+Math.floor(.05*this.getWoodAmount())+" more wood than expected",type:s.MessageType.SUCCESS}))}},e.prototype.handleRandomStoneIncreaseEvent=function(){var e=this.getBuilding(s.Quarry.id);if(e&&!(e.getLevel()<1)){var t=Math.floor(1.05*this.getStoneAmount());t<1||this.getTotalResourceCount()-this.getStoneAmount()+t>this.storageCapacity||(this.changeStoneAmount(t),this.addGameMessage({message:"Your miners did stunishing job today and produced "+Math.floor(.05*this.getStoneAmount())+" more Stone than expected",type:s.MessageType.SUCCESS}))}},e.prototype.handleRandomTradeEvent=function(){var e=Math.floor(10*Math.random())+1,t=Math.floor(10*Math.random())+1,n=Math.floor(10*Math.random())+1;this.getGoldAmount()&&this.getWoodAmount()&&this.getStoneAmount()&&(this.changeGoldAmount(this.getGoldAmount()+n),this.changeWoodAmount(this.getWoodAmount()+e),this.changeStoneAmount(this.getStoneAmount()+t),this.addGameMessage({message:"Your villagers did awesome trade with local tradesman. You earned "+n+" gold, "+t+" stone, "+e+" wood.",type:s.MessageType.SUCCESS}))},e.prototype.handleRandomDefenceIncreaseEvent=function(){var e=this.getBuilding(s.Barracks.id);if(!(!e||e.getLevel()<1||this.villageUnits.length<1)){var t=Math.floor(5*Math.random())+1;this.villageDefence+=t,this.addGameMessage({message:"One of your warriors became extraordinary knight. Your village defence increased by "+t,type:s.MessageType.SUCCESS})}},e.prototype.getWarehouse=function(){return this.buildings.find((function(e){return e instanceof s.Warehouse}))},e.prototype.getWall=function(){return this.buildings.find((function(e){return e instanceof s.Wall}))},e.prototype.getBarracks=function(){return this.buildings.find((function(e){return e instanceof s.Barracks}))},e.prototype.getTownHall=function(){return this.buildings.find((function(e){return e instanceof s.TownHall}))},e.prototype.getAllResourcesCount=function(){return this.resources.reduce((function(e,t){return e+t.count}),0)},e.prototype.getListOfAvailableResources=function(){return this.resources.filter((function(e){return e.count>0}))},e.prototype.updateBuildings=function(){this.buildings.forEach((function(e){return e.update()}))},e.prototype.updateUnits=function(){this.villageUnits.forEach((function(e){return e.update()}))},e.prototype.handleAttack=function(){var e=this.getEnemies();this.isVillageDefended(e)?(this.attackSurvived++,this.addGameMessage({message:"Congratulations! You have repulsed the attack.",type:s.MessageType.SUCCESS})):(this.addGameMessage({message:"You lost the battle.",type:s.MessageType.ERROR}),this.reducePopulation(e),this.stealResources(e)),this.destroyUnits(e)},e.prototype.reducePopulation=function(e){var t=Math.round(.8*e.length);this.population-=t,this.addGameMessage({message:"The population of your residents has decreased by "+t+" "+(1===t?"person":"people")+".",type:s.MessageType.ERROR}),this.population<0&&(this.population=0)},e.prototype.reduceTimeBuilding=function(){var e=this.getTownHall(),t=null==e?void 0:e.reducingConstructionTime();this.getBuildings().forEach((function(e){if(t){var n=t*e.timeToBuildInMiliseconds;return e.timeToBuildInMiliseconds=e.timeToBuildInMiliseconds-n}}))},e.prototype.destroyUnits=function(e){var t=this.getUnitsDefence(this.villageUnits),n=this.getUnitsAttack(e),i=0;if(t<n)i=Math.ceil((n-t)/10);else{var o=Math.ceil((t-n)/10);i=this.villageUnits.length-o}i>0&&i<=this.villageUnits.length&&(this.villageUnits.splice(0,i),this.addGameMessage({message:"You have lost "+i+" units.",type:s.MessageType.ERROR}))},e.prototype.stealResources=function(e){var t=this.getWarehouse(),n=void 0!==t?t.percentOfProtectedResources():0,i=this.getAllResourcesCount(),o=this.getUnitsCapacity(e),a=Math.round(i-n*i);o<a&&(a=o);var r=this.getListOfAvailableResources();for(a>0&&this.addGameMessage({message:"You have lost "+a+" of your resources.",type:s.MessageType.ERROR});a>0;)r.forEach((function(e){e.count>0&&a>0&&(e.count--,a--)}))},e.prototype.getEnemies=function(){var e=this,t=this.getWall(),n=this.villageUnits.length;switch(0===n&&(n=3),t&&(n+=Math.round(this.villageDefence/10)),this.gameSettings.difficulty){case s.Difficulty.Easy:n+=Math.round(1.1*n);break;case s.Difficulty.Medium:n+=Math.round(1.3*n);break;case s.Difficulty.Hard:n+=Math.round(1.5*n)}var o=a.randomBetween(1,n);return i(Array(o)).map((function(){return new s.Goblin(e)}))},e.prototype.isVillageDefended=function(e){return(this.getVillageDefence()-this.getUnitsAttack(e))/10>0},e.prototype.getUnitsDefence=function(e){return e.reduce((function(e,t){return t.isRecruited()?e+t.defence:e}),0)},e.prototype.getUnitsAttack=function(e){return e.reduce((function(e,t){return e+t.strength}),0)},e.prototype.getUnitsCapacity=function(e){return e.reduce((function(e,t){return e+t.capacity}),0)},e.prototype.calculateNextAttack=function(){var e=0,t=6e5,n=9e5,i=12e5;switch(this.gameSettings.difficulty){case s.Difficulty.Easy:e=this.gameSettings.easyDifficultyAttackCountdownInMiliseconds,this.elapsedTimeInMilliseconds>=i?e*=.4:this.elapsedTimeInMilliseconds>=n?e*=.6:this.elapsedTimeInMilliseconds>=t&&(e*=.8);break;case s.Difficulty.Medium:e=this.gameSettings.mediumDifficultyAttackCountdownInMiliseconds,this.elapsedTimeInMilliseconds>=i?e*=.3:this.elapsedTimeInMilliseconds>=n?e*=.5:this.elapsedTimeInMilliseconds>=t&&(e*=.8);break;case s.Difficulty.Hard:e=this.gameSettings.hardDifficultyAttackCountdownInMiliseconds,this.elapsedTimeInMilliseconds>=i?e*=.2:this.elapsedTimeInMilliseconds>=n?e*=.4:this.elapsedTimeInMilliseconds>=t&&(e*=.8)}return e},e}();t.Game=r},4005:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GameSettings=void 0;var i=n(4457),o=function(){this.difficulty=i.Difficulty.Medium,this.fraction=i.Fractions.Elves,this.backgroundMusicTurnedOn=!0,this.backgroundMusicVolume=.7,this.initialGoldAmount=100,this.initialWoodAmount=100,this.initialStoneAmount=100,this.initialStorageCapacity=600,this.initialPopulation=100,this.easyDifficultyAttackCountdownInMiliseconds=6e5,this.mediumDifficultyAttackCountdownInMiliseconds=48e4,this.hardDifficultyAttackCountdownInMiliseconds=3e5,this.barracksDefaultTimeToBuildInMiliseconds=18e4,this.goldmineDefaultTimeToBuildInMiliseconds=1e5,this.houseDefaultTimeToBuildInMiliseconds=12e4,this.quarryDefaultTimeToBuildInMiliseconds=1e5,this.sawmillDefaultTimeToBuildInMiliseconds=1e5,this.townhallDefaultTimeToBuildInMiliseconds=3e5,this.wallDefaultTimeToBuildInMiliseconds=2e5,this.warehouseDefaultTimeToBuildInMiliseconds=3e5,this.warriorDefaultTimeToRecruitInMiliseconds=12e4};t.GameSettings=o},1495:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(9962),t),o(n(2087),t),o(n(455),t),o(n(2860),t)},6508:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Barracks=void 0;var s=n(585),a=n(6891),r=function(e){function t(t){var n=e.call(this,t,[{type:s.ResourceType.Gold,count:1},{type:s.ResourceType.Wood,count:1},{type:s.ResourceType.Stone,count:3}],t.gameSettings.barracksDefaultTimeToBuildInMiliseconds,3)||this;return n.capacity=30,n.toString=function(){return"Barracks: [level = "+n.level+"]"},n}return o(t,e),Object.defineProperty(t,"id",{get:function(){return"barracks"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return t.id},enumerable:!1,configurable:!0}),t.prototype.getTitle=function(){return"Barracks"},t.prototype.getDescription=function(){return"It allows to recruit units to protect the village."},t.prototype.getCapacity=function(){return this.capacity*this.level},t}(a.Building);t.Barracks=r},6891:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Building=void 0;var i=n(3329),o=n(585),s=function(){function e(e,t,n,i){var o=this;this.game=e,this.resourcesNeededToBuild=t,this.timeToBuildInMiliseconds=n,this.maxLevel=i,this.level=0,this.isBuilding=!1,this.remainingTimeToBuild=this.timeToBuildInMiliseconds,this.toString=function(){return"Building: [level = "+o.level+"]"}}return Object.defineProperty(e,"id",{get:function(){return"building"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return e.id},enumerable:!1,configurable:!0}),e.prototype.getLevel=function(){return this.level},e.prototype.destroyBuildingLevel=function(){this.level>=1&&(this.level--,this.game.addGameMessage({message:"Watch out, there was a storm and lighting has hit your "+this.getTitle()+". It's level got decreased by one.",type:o.MessageType.ERROR}))},e.prototype.getResourcesNeededToBuild=function(){return this.resourcesNeededToBuild},e.prototype.getTitle=function(){return""},e.prototype.getDescription=function(){return""},e.prototype.startBuilding=function(){this.canUpgarde()&&!this.isBuilding&&(this.game.hasAvailableResources(this.resourcesNeededToBuild)?(this.isBuilding=!0,this.game.handleStartingConstructionOfBuilding(this),this.game.addGameMessage({message:"You have started upgrading the "+this.getTitle()+".",type:o.MessageType.INFO})):this.game.addGameMessage({message:"You don't have enough resources to buy the "+this.getTitle(),type:o.MessageType.WARNING}))},e.prototype.canUpgarde=function(){return this.level<this.maxLevel},e.prototype.update=function(){this.isBuilding&&(this.remainingTimeToBuild-=i.GAME_LOOP_DELAY_IN_MILISECONDS,this.remainingTimeToBuild<=0&&(this.isBuilding=!1,this.level++,this.remainingTimeToBuild=this.timeToBuildInMiliseconds,this.handleBuildingWasBuilt(),this.increaseResourcesNeededToBuild(),this.game.handleBuildingWasBuilt(this),this.game.addGameMessage({message:"The "+this.getTitle()+" was upgraded to the level "+this.getLevel()+".",type:o.MessageType.INFO})))},e.prototype.handleBuildingWasBuilt=function(){},e.prototype.increaseResourcesNeededToBuild=function(){this.resourcesNeededToBuild.forEach((function(e){e.count=parseInt((1.5*e.count).toFixed(0))}))},e}();t.Building=s},7229:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Goldmine=void 0;var s=n(585),a=n(6891),r=[0,3,5,7,10,12],u=function(e){function t(t){var n=e.call(this,t,[{type:s.ResourceType.Gold,count:5},{type:s.ResourceType.Wood,count:1},{type:s.ResourceType.Stone,count:4}],t.gameSettings.goldmineDefaultTimeToBuildInMiliseconds,5)||this;return n.goldProduction=r,n.toString=function(){return"Gold Mine: [level = "+n.level+"]"},n}return o(t,e),Object.defineProperty(t,"id",{get:function(){return"goldmine"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return t.id},enumerable:!1,configurable:!0}),t.prototype.handleBuildingWasBuilt=function(){var e=this;this.passiveIncomeInterval||(this.passiveIncomeInterval=setInterval((function(){e.game.handleGoldmineWasBuilt(e)}),3e4))},t.prototype.getProduction=function(){return this.goldProduction[this.level]},t.prototype.getTitle=function(){return"Gold Mine"},t.prototype.getDescription=function(){return"Build gold mines to mine gold. With each level you are able to mine more gold."},t}(a.Building);t.Goldmine=u},2753:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.House=void 0;var s=n(585),a=n(6891),r=function(e){function t(t){var n=e.call(this,t,[{type:s.ResourceType.Gold,count:1},{type:s.ResourceType.Wood,count:3},{type:s.ResourceType.Stone,count:1}],t.gameSettings.houseDefaultTimeToBuildInMiliseconds,100)||this;return n.population=10,n.toString=function(){return"House: [level = "+n.level+"]"},n}return o(t,e),Object.defineProperty(t,"id",{get:function(){return"house"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return t.id},enumerable:!1,configurable:!0}),t.prototype.getTitle=function(){return"House"},t.prototype.getDescription=function(){return"With each new house level, the population of your village increases."},t.prototype.handleBuildingWasBuilt=function(){this.population=Math.round(1.1*this.population)},t}(a.Building);t.House=r},6101:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(6891),t),o(n(6508),t),o(n(2753),t),o(n(2806),t),o(n(2927),t),o(n(7229),t),o(n(1014),t),o(n(4526),t),o(n(3419),t)},1014:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Quarry=void 0;var s=n(585),a=n(6891),r=[0,4,8,12],u=function(e){function t(t){var n=e.call(this,t,[{type:s.ResourceType.Gold,count:1},{type:s.ResourceType.Wood,count:1},{type:s.ResourceType.Stone,count:3}],t.gameSettings.quarryDefaultTimeToBuildInMiliseconds,3)||this;return n.stoneProduction=r,n.toString=function(){return"Quarry: [level = "+n.level+"]"},n}return o(t,e),Object.defineProperty(t,"id",{get:function(){return"quarry"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return t.id},enumerable:!1,configurable:!0}),t.prototype.handleBuildingWasBuilt=function(){var e=this;this.passiveIncomeInterval||(this.passiveIncomeInterval=setInterval((function(){e.game.handleQuarryWasBuilt(e)}),3e4))},t.prototype.getProduction=function(){return this.stoneProduction[this.level]},t.prototype.getTitle=function(){return"Quarry"},t.prototype.getDescription=function(){return"Build a quarry to extract stones. With each level the output increases."},t}(a.Building);t.Quarry=u},4526:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Sawmill=void 0;var s=n(585),a=n(6891),r=[0,4,8,12],u=function(e){function t(t){var n=e.call(this,t,[{type:s.ResourceType.Gold,count:1},{type:s.ResourceType.Wood,count:1},{type:s.ResourceType.Stone,count:3}],t.gameSettings.sawmillDefaultTimeToBuildInMiliseconds,3)||this;return n.woodProduction=r,n.toString=function(){return"Sawmill: [level = "+n.level+"]"},n}return o(t,e),Object.defineProperty(t,"id",{get:function(){return"sawmill"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return t.id},enumerable:!1,configurable:!0}),t.prototype.handleBuildingWasBuilt=function(){var e=this;this.passiveIncomeInterval||(this.passiveIncomeInterval=setInterval((function(){e.game.handleSawmillWasBuilt(e)}),3e4))},t.prototype.getProduction=function(){return this.woodProduction[this.level]},t.prototype.getTitle=function(){return"Sawmill"},t.prototype.getDescription=function(){return"Build a sawmill to produce wood. With each level the production increases."},t}(a.Building);t.Sawmill=u},3419:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.TownHall=void 0;var s=n(585),a=n(6891),r=[0,.2,.3,.5],u=function(e){function t(t){var n=e.call(this,t,[{type:s.ResourceType.Gold,count:10},{type:s.ResourceType.Wood,count:15},{type:s.ResourceType.Stone,count:20}],t.gameSettings.townhallDefaultTimeToBuildInMiliseconds,3)||this;return n.toString=function(){return"Town Hall: [level = "+n.level+"]"},n}return o(t,e),Object.defineProperty(t,"id",{get:function(){return"townhall"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return t.id},enumerable:!1,configurable:!0}),t.prototype.getTitle=function(){return"Town Hall"},t.prototype.getDescription=function(){return"Each new Town Hall level makes your buildings build faster."},t.prototype.reducingConstructionTime=function(){return r[this.level]},t}(a.Building);t.TownHall=u},2806:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Wall=void 0;var s=n(585),a=n(6891),r=[0,10,15,20],u=function(e){function t(t){var n=e.call(this,t,[{type:s.ResourceType.Gold,count:1},{type:s.ResourceType.Wood,count:1},{type:s.ResourceType.Stone,count:3}],t.gameSettings.wallDefaultTimeToBuildInMiliseconds,3)||this;return n.defence=r,n.toString=function(){return"Wall: [level = "+n.level+"]"},n}return o(t,e),Object.defineProperty(t,"id",{get:function(){return"wall"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return t.id},enumerable:!1,configurable:!0}),t.prototype.getDefence=function(){return this.defence[this.level]},t.prototype.getTitle=function(){return"Wall"},t.prototype.getDescription=function(){return"Build defensive walls to increase the defense of your village."},t}(a.Building);t.Wall=u},2927:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Warehouse=void 0;var s=n(585),a=n(6891),r=[0,.05,.1,.25,.4,.5],u=function(e){function t(t){var n=e.call(this,t,[{type:s.ResourceType.Gold,count:2},{type:s.ResourceType.Wood,count:2},{type:s.ResourceType.Stone,count:1}],t.gameSettings.warehouseDefaultTimeToBuildInMiliseconds,5)||this;return n.capacity=100,n.toString=function(){return"Warehouse: [level = "+n.level+"]"},n}return o(t,e),Object.defineProperty(t,"id",{get:function(){return"warehouse"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return t.id},enumerable:!1,configurable:!0}),t.prototype.getTitle=function(){return"Warehouse"},t.prototype.getDescription=function(){return"Upgrade warehouse to increase its capacity."},t.prototype.percentOfProtectedResources=function(){return r[this.level]},t}(a.Building);t.Warehouse=u},3751:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4457:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(6101),t),o(n(7529),t),o(n(585),t),o(n(3751),t)},9373:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Fractions=void 0,function(e){e.Humans="humans",e.Elves="elves",e.Dwarves="dwarves"}(t.Fractions||(t.Fractions={}))},3395:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageType=void 0,function(e){e.INFO="info",e.WARNING="warning",e.ERROR="error",e.SUCCESS="success"}(t.MessageType||(t.MessageType={}))},3153:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Difficulty=void 0,function(e){e.Easy="Easy",e.Medium="Medium",e.Hard="Hard"}(t.Difficulty||(t.Difficulty={}))},585:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(3153),t),o(n(9373),t),o(n(4350),t),o(n(3395),t)},4350:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceType=void 0,function(e){e.Gold="Gold",e.Wood="Wood",e.Stone="Stone"}(t.ResourceType||(t.ResourceType={}))},1348:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Goblin=void 0;var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.strength=8,t.capacity=8,t}return o(t,e),t}(n(7035).Unit);t.Goblin=s},7529:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(7035),t),o(n(1348),t),o(n(4311),t)},7035:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Unit=void 0;var i=n(3329),o=n(585),s=function(){function e(e,t){void 0===t&&(t=0),this.game=e,this.timeToRecruitInMiliseconds=t,this.strength=0,this.defence=0,this.capacity=0,this.goldNeededToRecruit=0,this.isUnitRecruited=!1,this.isRecruiting=!1,this.remainingTimeToRecruit=this.timeToRecruitInMiliseconds}return e.prototype.isRecruited=function(){return this.isUnitRecruited},e.prototype.startRecruiting=function(){this.isRecruiting=!0},e.prototype.getTitle=function(){return""},e.prototype.update=function(){this.isRecruiting&&(this.remainingTimeToRecruit-=i.GAME_LOOP_DELAY_IN_MILISECONDS,this.remainingTimeToRecruit<=0&&(this.isRecruiting=!1,this.isUnitRecruited=!0,this.remainingTimeToRecruit=this.timeToRecruitInMiliseconds,this.game.addGameMessage({message:"The "+this.getTitle()+" was recruited.",type:o.MessageType.INFO})))},e.prototype.render=function(){},e}();t.Unit=s},4311:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Warrior=void 0;var s=n(7035),a=function(e){function t(t){var n=e.call(this,t,t.gameSettings.warriorDefaultTimeToRecruitInMiliseconds)||this;return n.defence=10,n.goldNeededToRecruit=2,n}return o(t,e),t.prototype.getTitle=function(){return"Warrior"},t}(s.Unit);t.Warrior=a},7345:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GamePage=void 0;var i=n(455),o=n(4457),s=n(2860),a=n(3329),r=function(){function e(e){this.isGameOverModalVisible=!1,this.attackWarningMessageAdded=!1,this.app=e,this.game=this.app.game,this.audio=this.app.audio,this.quitModal=new i.QuitModal(this,this.game)}return e.prototype.show=function(e){var t,n=this,i=document.querySelector(a.DOMElements.gameScreenTemplateSelector),o=null===(t=null==i?void 0:i.content.firstElementChild)||void 0===t?void 0:t.cloneNode(!0);o&&(e.appendChild(o),this.bindUIElements(),this.bindEvents(),this.setupUI(),setTimeout((function(){n.gameScreen.classList.add(a.DOMElements.gameScreenOpenedClass),n.startGame()}),500))},e.prototype.close=function(e){var t=this;setTimeout((function(){e.removeChild(t.gameScreen)}),500)},e.prototype.bindUIElements=function(){this.quitButton=document.querySelector(a.DOMElements.quitButtonSelector),this.gameScreen=document.querySelector(a.DOMElements.gameScreenSelector),this.fractionImg=document.querySelector(a.DOMElements.fractionImageSelector),this.goldAmountElement=document.querySelector(a.DOMElements.goldAmountSelector),this.woodAmountElement=document.querySelector(a.DOMElements.woodAmountSelector),this.stoneAmountElement=document.querySelector(a.DOMElements.stoneAmountSelector),this.populationElement=document.querySelector(a.DOMElements.populationCountSelector),this.defenceElement=document.querySelector(a.DOMElements.defenceCountSelector),this.unitsElement=document.querySelector(a.DOMElements.unitsCountSelector),this.addUnitButtonElement=document.querySelector(a.DOMElements.addUnitsButtonSelector),this.messageList=document.querySelector(a.DOMElements.gameMessagesSelector),this.progressBar=document.querySelector(a.DOMElements.nextAttackProgressBarSelector),this.progressHeader=document.querySelector(a.DOMElements.nextAttackHeaderSelector)},e.prototype.bindEvents=function(){this.setClosePageEvent(),this.bindEventsForAddUnitButton()},e.prototype.setupUI=function(){this.setBackgrondImage(),this.setFractionImage()},e.prototype.setFractionImage=function(){var e=this.app.gameSettings.fraction,t=n(9620)("./"+e+".png");this.fractionImg.style.backgroundImage="url("+t.default+")"},e.prototype.setBackgrondImage=function(){var e=n(1837)("./"+this.app.gameSettings.fraction+"-bg.jpg");this.gameScreen.style.backgroundImage="url("+e.default+")"},e.prototype.setClosePageEvent=function(){var e=this;this.quitButton.addEventListener("click",(function(){e.quitModal.render()}))},e.prototype.bindEventsForAddUnitButton=function(){var e=this;this.addUnitButtonElement.addEventListener("click",(function(){e.game.startRecruitingUnit(new o.Warrior(e.game))}))},e.prototype.quitGame=function(){this.app.resetGame(),this.app.showHomePage(!0),this.game.stop()},e.prototype.startGame=function(){this.showBattle(),this.game.start(this.updateUI.bind(this)),this.renderBuildings()},e.prototype.updateUI=function(){var e=this;requestAnimationFrame((function(){e.updateGoldAmount(),e.updateWoodAmount(),e.updateStoneAmount(),e.updatePopulation(),e.updateDefence(),e.updateUnits(),e.updateNextAttackProgressBar(),e.showBattle(),e.updateBuildings(),e.renderGameMessages(),e.game.isGameOver()&&(e.isGameOverModalVisible||(e.isGameOverModalVisible=!0,e.showGameOverModal()))}))},e.prototype.updateGoldAmount=function(){this.goldAmountElement.textContent=this.game.getGoldAmount().toString()},e.prototype.updateWoodAmount=function(){this.woodAmountElement.textContent=this.game.getWoodAmount().toString()},e.prototype.updateStoneAmount=function(){this.stoneAmountElement.textContent=this.game.getStoneAmount().toString()},e.prototype.updatePopulation=function(){this.populationElement.textContent=this.game.getPopulation().toString()},e.prototype.updateDefence=function(){this.defenceElement.textContent=this.game.getVillageDefence().toString()},e.prototype.updateUnits=function(){this.unitsElement.textContent=this.game.getRecruitedUnits().toString()},e.prototype.updateNextAttackProgressBar=function(){var e=this.game.getNextAttackTotal(),t=100-this.game.getPeaceTimeDuration()/e*100;this.checkProgressBarStatus(t),this.progressBar.style.width=t.toFixed(2)+"%"},e.prototype.updateBuildings=function(){var e=this;this.game.getBuildings().forEach((function(t){var n=t.id,i=document.querySelector("."+a.DOMElements.buildingProgressBarClass+"--"+n),o=document.querySelector("."+a.DOMElements.buildingUpgradeButtonClass+"--"+n);if(t.isBuilding){var s=t.timeToBuildInMiliseconds,r=100-t.remainingTimeToBuild/s*100;i.style.width=r.toFixed(2)+"%",o.disabled=!0}else i.style.width="0%",o.disabled=!1,e.updateBuildingContainer(t)}))},e.prototype.renderGameMessages=function(){var e=this.game.getGameMessages().shift();e&&this.addMessageToList(e)},e.prototype.getTypeOfMessage=function(e){return a.DOMElements.gameMessagesItemClass+"--"+e.type},e.prototype.addMessageToList=function(e){var t=s.createElement({type:"li",content:e.message,classes:[a.DOMElements.gameMessagesItemClass,this.getTypeOfMessage(e)]});this.messageList.appendChild(t),this.messageList.scrollTop=this.messageList.scrollHeight},e.prototype.checkProgressBarStatus=function(e){e<10?(this.progressHeader.style.animation="warnCicle 2s ease-in-out 0s alternate infinite none",this.progressBar.style.backgroundColor="red",this.attackWarningMessageAdded||(this.attackWarningMessageAdded=!0,this.game.addGameMessage({message:"Be ready. The enemy is approaching your gates.",type:o.MessageType.WARNING}))):e>=95&&(this.attackWarningMessageAdded=!1,this.progressHeader.style.animation="none",this.progressHeader.style.backgroundColor="rgba(255, 255, 255, 0.7)",this.progressHeader.style.color="var(--primary-color)",this.progressBar.style.backgroundColor="var(--primary-dark-color)")},e.prototype.renderBuildings=function(){var e=this,t=document.querySelector(a.DOMElements.buildingListSelector);this.game.getBuildings().forEach((function(n){var i=s.createElement({type:"li",classes:[a.DOMElements.buildingListItemClass],innerHTML:e.getBuildingContent(n)});null==t||t.appendChild(i)})),(null==t?void 0:t.querySelectorAll("."+a.DOMElements.buildingUpgradeButtonClass)).forEach((function(t){t.addEventListener("click",(function(t){var n=t.currentTarget;if(n){var i=n.dataset.building||"",o=e.game.getBuilding(i);o&&o.startBuilding()}}))}))},e.prototype.getBuildingLevelContainer=function(e){return document.querySelector("."+a.DOMElements.buildingLevelClass+"--"+e.id)},e.prototype.getBuildingPriceContainer=function(e){return document.querySelectorAll("."+a.DOMElements.buildingPriceClass+"--"+e.id)},e.prototype.updateBuildingContainer=function(e){var t=0;this.getBuildingLevelContainer(e).textContent="Level: "+e.getLevel(),this.getBuildingPriceContainer(e).forEach((function(n){n.textContent=e.getResourcesNeededToBuild()[t].count+" "+e.getResourcesNeededToBuild()[t].type,t++}))},e.prototype.getBuildingContent=function(e){var t=e.getResourcesNeededToBuild();return'\n      <div class="'+a.DOMElements.buildingClass+'">\n      <h3 class="'+a.DOMElements.buildingHeadingClass+'">'+e.getTitle()+'</h3>\n      <p class="'+a.DOMElements.buildingLevelClass+" "+a.DOMElements.buildingLevelClass+"--"+e.id+'">Level: '+e.getLevel()+'</p>\n      <div class="progress '+a.DOMElements.buildingProgressClass+'">\n        <div\n          class="progress-bar '+a.DOMElements.buildingProgressBarClass+" "+a.DOMElements.buildingProgressBarClass+"--"+e.id+'"\n          role="progressbar">\n        </div>\n      </div>\n      <button class="'+a.DOMElements.buildingUpgradeButtonClass+" "+a.DOMElements.buildingUpgradeButtonClass+"--"+e.id+'" data-building="'+e.id+'">\n        <i class="fas fa-plus-circle"></i>\n      </button>\n      <div class="'+a.DOMElements.buildingDetailsClass+'">\n        <h3 class="'+a.DOMElements.buildingDetailsTitleClass+'">'+e.getTitle()+'</h3>\n        <p class="'+a.DOMElements.buildingDetailsDescriptionClass+'">'+e.getDescription()+'</p>\n        <ul class="'+a.DOMElements.buildingDetailsResourcesClass+'">\n          '+t.map((function(t){return'<li class="'+a.DOMElements.buildingPriceClass+" "+a.DOMElements.buildingPriceClass+"--"+t.type+" "+a.DOMElements.buildingPriceClass+"--"+e.id+'">'+t.count+" "+t.type+"</li>"})).join("")+"\n        </ul>\n      </div>\n    "},e.prototype.showBattle=function(){new i.Battle(this.audio,this.game).handleBattle()},e.prototype.showGameOverModal=function(){var e=this;new i.GameOverModal(this.game).show((function(){e.isGameOverModalVisible=!1,e.quitGame()}))},e}();t.GamePage=r},6614:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HomePage=void 0;var i=n(4457),o=n(2860),s=n(455),a=n(3329),r=function(){function e(e){this.app=e,this.audio=this.app.audio}return e.prototype.show=function(e,t){var n,i=this,o=document.querySelector("#"+a.DOMElements.startScreenTemplateID),s=null===(n=null==o?void 0:o.content.firstElementChild)||void 0===n?void 0:n.cloneNode(!0);s&&(e.appendChild(s),this.bindUIElements(),this.bindEvents(),t&&(this.updateTheme(),this.startScreen.classList.add(a.DOMElements.startScreenHiddenClass),this.startScreen.classList.add(a.DOMElements.startScreenOpenedClass),setTimeout((function(){i.startScreen.classList.remove(a.DOMElements.startScreenHiddenClass),i.startScreen.classList.remove(a.DOMElements.startScreenOpenedClass)}),500)))},e.prototype.close=function(e){var t=this;this.startScreen.classList.add(a.DOMElements.startScreenClosedClass),setTimeout((function(){e.removeChild(t.startScreen)}),500)},e.prototype.bindUIElements=function(){this.settingButton=document.querySelector(a.DOMElements.startGameBtnID),this.infoButton=document.querySelector("."+a.DOMElements.infoBtnID),this.startButton=document.querySelector("#"+a.DOMElements.startGameBtnID),this.characterButton=document.querySelector("#"+a.DOMElements.characterDropdownID),this.startScreen=document.querySelector("."+a.DOMElements.startScreenClass),this.startScreenBackground=document.querySelector("."+a.DOMElements.startScreenBgClass),this.startScreenLogo=document.querySelector("."+a.DOMElements.startScreenLogoClass),this.characterButtonOptions=document.querySelectorAll("."+a.DOMElements.startScreenBtnOption),this.startScreenLogoBackground=document.querySelector("."+a.DOMElements.startScreenLogoBgClass)},e.prototype.removeClasses=function(){for(var e=0,t=o.enumKeys(i.Fractions);e<t.length;e++){var n=t[e],s=i.Fractions[n];this.startScreenLogo.classList.remove(a.DOMElements.startScreenLogoClass+"--"+s),this.startScreenLogoBackground.classList.remove(s+"__background"),this.startScreenBackground.classList.remove(a.DOMElements.startScreenClass+"--"+s)}this.characterButtonOptions.forEach((function(e){e.classList.remove(a.DOMElements.startScreenBtnOptionSelected)}))},e.prototype.changeButtonTextContent=function(){this.characterButton.children[0].innerText=o.capitalizeFirstLetter(this.app.gameSettings.fraction)},e.prototype.onFractionDidChange=function(e){this.app.gameSettings.fraction=o.getFractionForName(e),this.startScreen.style.background=getComputedStyle(this.startScreenBackground).background,this.removeClasses(),this.changeLogo(),this.changeBackground(),this.updateTheme()},e.prototype.updateTheme=function(){var e=this.app.gameSettings.fraction;o.setCSSProperty("--primary-color",o.getCSSProperty("--"+e+"-color")),o.setCSSProperty("--primary-dark-color",o.getCSSProperty("--"+e+"-dark-color")),o.setCSSProperty("--quit-button-background-color",o.getCSSProperty("--"+e+"-quit-button-background-color")),o.setCSSProperty("--quit-button-hover-background-color",o.getCSSProperty("--"+e+"-quit-button-hover-background-color"))},e.prototype.changeLogo=function(){var e=this,t=this.app.gameSettings.fraction;this.startScreenLogo.classList.add(a.DOMElements.startScreenLogoClass+"--"+t),this.startScreenLogoBackground.classList.add(t+"__background"),this.startScreenLogoBackground.classList.add(a.DOMElements.backgroundAnimation);var n=1===Math.floor(2*Math.random())?a.DOMElements.logoAnimationOneClass:a.DOMElements.logoAnimationTwoClass;this.startScreenLogo.classList.add(n),setTimeout((function(){e.startScreenLogo.classList.remove(n)}),700),setTimeout((function(){e.startScreenLogoBackground.classList.remove(a.DOMElements.backgroundAnimation)}),700)},e.prototype.changeBackground=function(){var e=this,t=this.app.gameSettings.fraction;this.startScreenBackground.style.display="none",setTimeout((function(){return e.startScreenBackground.style.display="block"}),100),this.startScreenBackground.classList.add(a.DOMElements.startScreenClass+"--"+t)},e.prototype.handleFracChange=function(){var e=this;this.characterButtonOptions.forEach((function(t){t.addEventListener("click",(function(){var n=t.value;e.onFractionDidChange(n),e.changeButtonTextContent(),e.triggerOptionButton(t)}))}))},e.prototype.triggerStartButton=function(){var e=this;this.startButton.addEventListener("click",(function(){e.app.showSplashPage()}))},e.prototype.triggerOptionButton=function(e){e.classList.add(""+a.DOMElements.startScreenBtnOptionSelected)},e.prototype.bindEvents=function(){this.handleFracChange(),this.triggerStartButton(),new s.InfoModal,new s.GameSettingsModal(this.app,this.audio)},e}();t.HomePage=r},2087:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(7345),t),o(n(6614),t),o(n(9700),t)},9700:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SplashPage=void 0;var i=n(3329),o=function(){function e(e){this.loadingDurationInMiliseconds=3e3,this.elapsedTimeInMilliseconds=0,this.startTime=0,this.app=e}return e.prototype.show=function(e){var t,n=document.querySelector("#"+i.DOMElements.splashScreenID),o=null===(t=null==n?void 0:n.content.firstElementChild)||void 0===t?void 0:t.cloneNode(!0);o&&(e.appendChild(o),this.bindUIElements(),this.startLoading())},e.prototype.close=function(e){var t=this;this.splashScreen.classList.add(i.DOMElements.splashScreenClosedClass),setTimeout((function(){e.removeChild(t.splashScreen)}),500)},e.prototype.bindUIElements=function(){this.splashScreen=document.querySelector("."+i.DOMElements.splashScreenClass),this.progressBarElement=document.querySelector("."+i.DOMElements.splashScreenLoadingBar),this.percentElement=document.querySelector("."+i.DOMElements.splashScreenLoadingPercentCLass)},e.prototype.startLoading=function(){var e=this;this.startTime=Date.now(),this.intervalId=window.setInterval((function(){e.elapsedTimeInMilliseconds=Date.now()-e.startTime,e.updateProgressBar(),e.elapsedTimeInMilliseconds>=e.loadingDurationInMiliseconds&&(e.elapsedTimeInMilliseconds=0,window.clearInterval(e.intervalId),e.intervalId=void 0,e.showGame())}),10)},e.prototype.updateProgressBar=function(){var e=this.elapsedTimeInMilliseconds/this.loadingDurationInMiliseconds*100;this.progressBarElement.style.width=e+"%",this.percentElement.textContent=e.toFixed()+"%"},e.prototype.showGame=function(){this.app.showGamePage()},e}();t.SplashPage=o},5047:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createElement=void 0,t.createElement=function(e){var t=e.type,n=e.content,i=e.id,o=e.classes,s=e.handleEvent,a=(e.properties,e.innerHTML),r=e.styles,u=document.createElement(t);if(n&&(u.textContent=n),i&&(u.id=i),o&&o.forEach((function(e){u.classList.add(e)})),s)for(var l=0,c=Object.entries(s);l<c.length;l++){var d=c[l],p=d[0],h=d[1];u.addEventListener(p,h)}if(a&&(u.innerHTML=a),r)for(var m=0,g=Object.entries(r);m<g.length;m++){var f=g[m];p=f[0],h=f[1];u.style[p]=h}return u}},4831:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.secondsToDate=void 0,t.secondsToDate=function(e){return e<=0?"00:00:00":new Date(1e3*e).toISOString().substr(11,8)}},699:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFractionForName=void 0;var i=n(4457),o=n(10);t.getFractionForName=function(e){return i.Fractions[o.capitalizeFirstLetter(e)]}},1650:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enumKeys=void 0,t.enumKeys=function(e){return Object.keys(e).filter((function(e){return Number.isNaN(+e)}))}},2860:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(5047),t),o(n(4831),t),o(n(3078),t),o(n(10),t),o(n(1650),t),o(n(699),t),o(n(615),t)},3078:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomBetween=void 0,t.randomBetween=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=10),Math.floor(Math.random()*(t-e+1)+e)}},10:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.capitalizeFirstLetter=void 0,t.capitalizeFirstLetter=function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},615:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCSSProperty=t.setCSSProperty=void 0,t.setCSSProperty=function(e,t){document.documentElement.style.setProperty(e,t)},t.getCSSProperty=function(e){var t=document.documentElement;return getComputedStyle(t).getPropertyValue(e)}},9417:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(2861),n(9274),n(6342),n(3164),n(7381),n(7600),n(7441),n(8786),n(3368),n(3321),n(4950),n(4461),n(6378),n(3208),n(3156),n(7931),n(1568),n(5460),n(8574)},3607:(e,t,n)=>{"use strict";n(9417);var i=n(1495);document.addEventListener("DOMContentLoaded",(function(){return(new i.App).start()}))},9620:(e,t,n)=>{var i={"./dwarves.png":4570,"./elves.png":7415,"./humans.png":6088};function o(e){var t=s(e);return n(t)}function s(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=s,e.exports=o,o.id=9620},1837:(e,t,n)=>{var i={"./dwarves-bg.jpg":5684,"./elves-bg.jpg":7515,"./humans-bg.jpg":3425};function o(e){var t=s(e);return n(t)}function s(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=s,e.exports=o,o.id=1837}},t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="./",n(3607)})();